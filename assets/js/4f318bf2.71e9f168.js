"use strict";(self.webpackChunkuni_docs=self.webpackChunkuni_docs||[]).push([[4499],{1123:(e,s,o)=>{o.d(s,{A:()=>n});const n=o.p+"assets/images/83image1-1595613674037-7bce38fbe64e747baa8db8d98f0b07a7.jpg"},28453:(e,s,o)=>{o.d(s,{R:()=>t,x:()=>r});var n=o(96540);const i={},a=n.createContext(i);function t(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),n.createElement(a.Provider,{value:s},e.children)}},41714:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>t,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"devops-notes/istio-service-mash/index","title":"\ud83d\ude80 Istio","description":"---","source":"@site/docs/devops-notes/02-istio-service-mash/index.md","sourceDirName":"devops-notes/02-istio-service-mash","slug":"/devops-notes/istio-service-mash/","permalink":"/docs/devops-notes/istio-service-mash/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/devops-notes/02-istio-service-mash/index.md","tags":[],"version":"current","frontMatter":{"title":"\ud83d\ude80 Istio"},"sidebar":"devopsNotesSidebar","previous":{"title":"Conhe\xe7a o Kind","permalink":"/docs/devops-notes/kubernetes/kind"},"next":{"title":"\ud83d\udd04 ArgoCD","permalink":"/docs/devops-notes/argoCD/"}}');var i=o(74848),a=o(28453);const t={title:"\ud83d\ude80 Istio"},r=void 0,c={},d=[{value:"Conceitos",id:"conceitos",level:3},{value:"Instala\xe7\xe3o",id:"instala\xe7\xe3o",level:3},{value:"Comandos",id:"comandos",level:3}];function l(e){const s={a:"a",blockquote:"blockquote",code:"code",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"conceitos",children:"Conceitos"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Istio"})," \xe9 um service mesh, que nada mais que \xe9 uma camada adicionada junto as aplica\xe7\xf5es deployadas no kubernetes que permite gerenciar a comunica\xe7\xe3o dos servi\xe7os num sistema distribu\xeddo."]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:'Um service mesh gerencia toda a comunica\xe7\xe3o servi\xe7o a servi\xe7o em um sistema de software distribu\xeddo (potencialmente baseado em microservices). Isso \xe9 feito normalmente por meio do uso de proxies "laterais (sidecar)" que s\xe3o implantados ao lado de cada servi\xe7o atrav\xe9s do qual todo o tr\xe1fego \xe9 roteado de forma transparente;'}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Com o Istio podemos resolver os problemas:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Externaliza\xe7\xe3o da configura\xe7\xe3o de comunica\xe7\xe3o dos servi\xe7os, incluindo locais de rede de servi\xe7os externos, credenciais de seguran\xe7a e metas de qualidade de servi\xe7o;"}),"\n",(0,i.jsx)(s.li,{children:"Fornecer monitoramento passivo e ativo de outros servi\xe7os;"}),"\n",(0,i.jsx)(s.li,{children:"Descentralizar a aplica\xe7\xe3o da pol\xedtica em um sistema distribu\xeddo;"}),"\n",(0,i.jsx)(s.li,{children:"Fornecer padr\xf5es de observabilidade e padronizar a coleta de dados associados."}),"\n",(0,i.jsx)(s.li,{children:"Ativando o registro de solicita\xe7\xf5es (logs)"}),"\n",(0,i.jsx)(s.li,{children:"Configurando o rastreamento distribu\xeddo;"}),"\n",(0,i.jsx)(s.li,{children:"Coletando m\xe9tricas"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Existem outros services mesh, Linkerd, Istio, Consul, Kuma e Maesh."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"image-20220813165959337",src:o(66808).A+"",width:"967",height:"615"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",src:o(1123).A+"",width:"975",height:"779"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"instala\xe7\xe3o",children:"Instala\xe7\xe3o"}),"\n",(0,i.jsxs)(s.p,{children:["link: ",(0,i.jsx)(s.a,{href:"https://istio.io/latest/docs/setup/getting-started/",children:"instale o istio"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"comandos",children:"Comandos"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"# Instalar istio no kunbernetes - veja outros profiles: https://istio.io/latest/docs/setup/additional-setup/config-profiles/\nistioctl install --set profile=demo -y \n\n\n# comandos uteis\n# lista os namespaces\nkubectl get namespaces\n\n# lista os pods de um namespace\nkubectl get pods -n istio-system\nkgp -n istio-system\n\n# lista os services de um namespace\nkubectl get svc -n istio-system\nkgs -n istio-system\n\n\n# instalar addons \nkubectl apply -f <istio-istall-folder>/samples/addons\nkubectl apply -f ~/Documents/programs/istio-1.14.3/samples/addons\n\n# Acessar dash kiali \nistioctl dashboard kiali\n\n# abre servi\xe7os\nmisinikube service <nome do servi\xe7o>\n\n# configurar uma porta local pra usar no localhost\nkubectl port-forward svc/<nome-servi\xe7o> -n <namespace-servi\xe7o> <porta-local>:<porta-servi\xe7o>\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Para ativar os proxys do ",(0,i.jsx)(s.strong,{children:"Istio"})," \xe9 necess\xe1rio configurar labels nos ",(0,i.jsx)(s.strong,{children:"namespace"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Ap\xf3s fazer isso automaticamente o istio vai subir no pod um container de proxy."}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"# use para listar as lables de um namespace\nkubectl get ns <namespace>  --show-labels=true\nkubectl get ns ucontas-app   --show-labels=true\n\n# Use para ativar o istion no namespace\nkubectl label namespace <nome-namespace> istio-injection=enabled\nkubectl label namespace ucontas-app istio-injection=enabled\n\n# E reciso reiniciar os pod para que seja adicionados os sidecar\nkubectl delete pods --all -n <namespace>\nkubectl delete pods --all -n ucontas-app\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:["Link: ",(0,i.jsx)(s.a,{href:"https://www.infoq.com/br/articles/service-mesh-ultimate-guide/",children:"https://www.infoq.com/br/articles/service-mesh-ultimate-guide/"})]})]})}function m(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},66808:(e,s,o)=>{o.d(s,{A:()=>n});const n=o.p+"assets/images/image-20220813165959337-c4c78be9e575b4f3b0931a55ea771e7e.png"}}]);